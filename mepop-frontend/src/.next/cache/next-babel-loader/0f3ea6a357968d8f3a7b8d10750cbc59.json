{"ast":null,"code":"import { UPDATE_FILES, UPDATE_DATA } from '../generalReducer';\nimport { processFiles } from '../../dataProcessing';\nimport { setupLocationKeys } from './keySetup';\nexport const fetchFiles = ({\n  firebase,\n  dispatch\n}, resolve) => {\n  firebase.getUserFiles(files => {\n    if (!files) return;\n\n    if (files) {\n      const processedFiles = processFiles(files);\n      dispatch({\n        type: UPDATE_DATA,\n        payload: processedFiles\n      });\n      resolve();\n    }\n\n    dispatch({\n      type: UPDATE_FILES,\n      payload: files\n    });\n    setupLocationKeys({\n      firebase,\n      dispatch\n    });\n  });\n  return null;\n};","map":{"version":3,"sources":["/Users/samuelwood/development/mepop-firebase/packages/mepop-next/src/store/actions/files.js"],"names":["UPDATE_FILES","UPDATE_DATA","processFiles","setupLocationKeys","fetchFiles","firebase","dispatch","resolve","getUserFiles","files","processedFiles","type","payload"],"mappings":"AAAA,SAASA,YAAT,EAAuBC,WAAvB,QAA0C,mBAA1C;AACA,SAASC,YAAT,QAA6B,sBAA7B;AACA,SAASC,iBAAT,QAAkC,YAAlC;AAEA,OAAO,MAAMC,UAAU,GAAG,CAAC;AAAEC,EAAAA,QAAF;AAAYC,EAAAA;AAAZ,CAAD,EAAyBC,OAAzB,KAAqC;AAC7DF,EAAAA,QAAQ,CAACG,YAAT,CAAuBC,KAAD,IAAW;AAC/B,QAAI,CAACA,KAAL,EAAY;;AACZ,QAAIA,KAAJ,EAAW;AACT,YAAMC,cAAc,GAAGR,YAAY,CAACO,KAAD,CAAnC;AACAH,MAAAA,QAAQ,CAAC;AAAEK,QAAAA,IAAI,EAAEV,WAAR;AAAqBW,QAAAA,OAAO,EAAEF;AAA9B,OAAD,CAAR;AAEAH,MAAAA,OAAO;AACR;;AAEDD,IAAAA,QAAQ,CAAC;AAAEK,MAAAA,IAAI,EAAEX,YAAR;AAAsBY,MAAAA,OAAO,EAAEH;AAA/B,KAAD,CAAR;AACAN,IAAAA,iBAAiB,CAAC;AAAEE,MAAAA,QAAF;AAAYC,MAAAA;AAAZ,KAAD,CAAjB;AACD,GAXD;AAYA,SAAO,IAAP;AACD,CAdM","sourcesContent":["import { UPDATE_FILES, UPDATE_DATA } from '../generalReducer'\nimport { processFiles } from '../../dataProcessing'\nimport { setupLocationKeys } from './keySetup'\n\nexport const fetchFiles = ({ firebase, dispatch }, resolve) => {\n  firebase.getUserFiles((files) => {\n    if (!files) return\n    if (files) {\n      const processedFiles = processFiles(files)\n      dispatch({ type: UPDATE_DATA, payload: processedFiles })\n\n      resolve()\n    }\n\n    dispatch({ type: UPDATE_FILES, payload: files })\n    setupLocationKeys({ firebase, dispatch })\n  })\n  return null\n}\n"]},"metadata":{},"sourceType":"module"}