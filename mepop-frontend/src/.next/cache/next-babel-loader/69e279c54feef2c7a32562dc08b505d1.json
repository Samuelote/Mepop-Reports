{"ast":null,"code":"var _jsxFileName = \"/Users/samuelwood/development/mepop-reports/mepop-frontend/src/components/reports/SalesByCategory/index.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useMemo, useState, memo } from 'react';\nimport { formatNum } from '../util/general';\nimport { groupByCategory } from '../util/grouping';\nimport VertComposedChart from '../../../styles/reporting/VertBarChart';\nimport Flex from '../../../styles/layout/Flex';\nimport ValueBox from '../../../styles/reporting/ValueBox';\nconst SalesByCategory = memo(({\n  data,\n  hideBoxes,\n  halfSize,\n  isBasic\n}) => {\n  const {\n    0: revenue,\n    1: showRevenue\n  } = useState(false);\n  const chartData = useMemo(() => groupByCategory(data, revenue), [revenue, data]);\n  const max = {\n    gross: chartData[0],\n    sold: chartData[0]\n  };\n  const min = {\n    gross: chartData[0],\n    sold: chartData[0]\n  };\n  chartData.forEach((current, i) => {\n    if (current['Gross Earnings'] > max.gross['Gross Earnings']) max.gross = current;\n    if (current['Items Sold'] > max.sold['Items Sold']) max.sold = current;\n    if (current['Gross Earnings'] < min.gross['Gross Earnings']) min.gross = current;\n    if (current['Items Sold'] < min.sold['Items Sold']) min.sold = current;\n  });\n  if (!chartData.length) return null;\n\n  if (halfSize) {\n    return __jsx(VertComposedChart, {\n      headerContent: `Sales By Category${chartData.length < 15 ? '' : ' - ( Top 15 )'}`,\n      data: chartData,\n      xdataKey: revenue ? 'Gross Earnings' : 'Items Sold',\n      ydataKey: \"Category\",\n      height: 500,\n      formatTooltip: (t, l) => formatTooltip(t, l, data),\n      switchLabel: \"Show Earnings\",\n      switchCheck: revenue,\n      switchEvent: () => {\n        showRevenue(!revenue);\n      },\n      proOnly: isBasic ? {\n        component: 'Sales by Category',\n        img: 'sales-by-category.png'\n      } : null,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 23,\n        columnNumber: 7\n      }\n    });\n  }\n\n  return __jsx(Flex, {\n    flexWrap: \"wrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 5\n    }\n  }, __jsx(VertComposedChart, {\n    headerContent: `Sales By Category${chartData.length < 15 ? '' : ' - ( Top 15 )'}`,\n    data: chartData,\n    xdataKey: revenue ? 'Gross Earnings' : 'Items Sold',\n    ydataKey: \"Category\",\n    height: 500,\n    formatTooltip: (t, l) => formatTooltip(t, l, data),\n    switchLabel: \"Show Earnings\",\n    switchCheck: revenue,\n    switchEvent: () => {\n      showRevenue(!revenue);\n    },\n    proOnly: isBasic ? {\n      component: 'Sales by Category',\n      img: 'sales-by-category.png'\n    } : null,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }\n  }), !hideBoxes ? __jsx(Flex, {\n    justifyContent: \"space-between\",\n    flexWrap: \"wrap\",\n    alignItems: \"stretch\",\n    maxWidth: \"50%\",\n    flexDirection: \"column\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 11\n    }\n  }, max ? __jsx(React.Fragment, null, __jsx(ValueBox, {\n    minWidth: \"50px\",\n    title: \"Highest Earning Category\",\n    string: true,\n    smallText: true,\n    value: `${max.gross.Category} - ${formatNum(data.currency_type, max.gross['Gross Earnings'])} Gross Profit`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 21\n    }\n  }), __jsx(ValueBox, {\n    minWidth: \"50px\",\n    title: \"Most Sold Category\",\n    string: true,\n    smallText: true,\n    value: `${max.sold.Category} - ${max.sold['Items Sold']} Items Sold`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 21\n    }\n  }), __jsx(ValueBox, {\n    minWidth: \"50px\",\n    title: \"Lowest Earning Category\",\n    string: true,\n    smallText: true,\n    value: `${min.gross.Category} -${formatNum(data.currency_type, min.gross['Gross Earnings'])} Gross Profit`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 21\n    }\n  }), __jsx(ValueBox, {\n    minWidth: \"50px\",\n    title: \"Least Sold Category\",\n    string: true,\n    smallText: true,\n    value: `${min.sold.Category} - ${min.sold['Items Sold']} Items Sold`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 21\n    }\n  })) : null) : null);\n});\nexport default SalesByCategory;\n\nconst formatTooltip = (tickItem, label, data) => {\n  if (label === 'Gross Earnings') {\n    return `${data.currency_type}${tickItem.toFixed(2)}`;\n  }\n\n  return tickItem;\n};","map":{"version":3,"sources":["/Users/samuelwood/development/mepop-reports/mepop-frontend/src/components/reports/SalesByCategory/index.js"],"names":["useMemo","useState","memo","formatNum","groupByCategory","VertComposedChart","Flex","ValueBox","SalesByCategory","data","hideBoxes","halfSize","isBasic","revenue","showRevenue","chartData","max","gross","sold","min","forEach","current","i","length","t","l","formatTooltip","component","img","Category","currency_type","tickItem","label","toFixed"],"mappings":"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","sourcesContent":["import { useMemo, useState, memo } from 'react'\n\nimport { formatNum } from '../util/general'\nimport { groupByCategory } from '../util/grouping'\nimport VertComposedChart from '../../../styles/reporting/VertBarChart'\nimport Flex from '../../../styles/layout/Flex'\nimport ValueBox from '../../../styles/reporting/ValueBox'\n\nconst SalesByCategory = memo(({ data, hideBoxes, halfSize, isBasic }) => {\n  const [revenue, showRevenue] = useState(false)\n  const chartData = useMemo(() => groupByCategory(data, revenue), [revenue, data])\n  const max = { gross: chartData[0], sold: chartData[0] }\n  const min = { gross: chartData[0], sold: chartData[0] }\n  chartData.forEach((current, i) => {\n    if (current['Gross Earnings'] > max.gross['Gross Earnings']) max.gross = current\n    if (current['Items Sold'] > max.sold['Items Sold']) max.sold = current\n    if (current['Gross Earnings'] < min.gross['Gross Earnings']) min.gross = current\n    if (current['Items Sold'] < min.sold['Items Sold']) min.sold = current\n  })\n  if (!chartData.length) return null\n  if (halfSize) {\n    return (\n      <VertComposedChart\n        headerContent={`Sales By Category${chartData.length < 15 ? '' : ' - ( Top 15 )'}`}\n        data={chartData}\n        xdataKey={revenue ? 'Gross Earnings' : 'Items Sold'}\n        ydataKey='Category'\n        height={500}\n        formatTooltip={(t, l) => formatTooltip(t, l, data)}\n        switchLabel='Show Earnings'\n        switchCheck={revenue}\n        switchEvent={() => {\n          showRevenue(!revenue)\n        }}\n        proOnly={isBasic ? {\n          component: 'Sales by Category',\n          img: 'sales-by-category.png'\n        } : null}\n      />\n    )\n  }\n  return (\n    <Flex flexWrap='wrap'>\n\n      <VertComposedChart\n        headerContent={`Sales By Category${chartData.length < 15 ? '' : ' - ( Top 15 )'}`}\n        data={chartData}\n        xdataKey={revenue ? 'Gross Earnings' : 'Items Sold'}\n        ydataKey='Category'\n        height={500}\n        formatTooltip={(t, l) => formatTooltip(t, l, data)}\n        switchLabel='Show Earnings'\n        switchCheck={revenue}\n        switchEvent={() => {\n          showRevenue(!revenue)\n        }}\n        proOnly={isBasic ? {\n          component: 'Sales by Category',\n          img: 'sales-by-category.png'\n        } : null}\n      />\n      {\n        !hideBoxes ? (\n          <Flex justifyContent='space-between' flexWrap='wrap' alignItems='stretch' maxWidth='50%' flexDirection='column'>\n            {\n              max\n                ? (\n                  <>\n                    <ValueBox\n                      minWidth='50px'\n                      title='Highest Earning Category'\n                      string\n                      smallText\n                      value={`${max.gross.Category} - ${formatNum(data.currency_type, max.gross['Gross Earnings'])} Gross Profit`}\n                    />\n                    <ValueBox\n                      minWidth='50px'\n                      title='Most Sold Category'\n                      string\n                      smallText\n                      value={`${max.sold.Category} - ${max.sold['Items Sold']} Items Sold`}\n                    />\n                    <ValueBox\n                      minWidth='50px'\n                      title='Lowest Earning Category'\n                      string\n                      smallText\n                      value={`${min.gross.Category} -${formatNum(data.currency_type, min.gross['Gross Earnings'])} Gross Profit`}\n                    />\n                    <ValueBox\n                      minWidth='50px'\n                      title='Least Sold Category'\n                      string\n                      smallText\n                      value={`${min.sold.Category} - ${min.sold['Items Sold']} Items Sold`}\n                    />\n                  </>\n                ) : null\n            }\n          </Flex>\n        ) : null\n      }\n\n    </Flex>\n  )\n})\n\nexport default (SalesByCategory)\n\nconst formatTooltip = (tickItem, label, data) => {\n  if (label === 'Gross Earnings') {\n    return `${data.currency_type}${tickItem.toFixed(2)}`\n  }\n  return tickItem\n}\n"]},"metadata":{},"sourceType":"module"}