{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport { useMemo, useState, memo } from 'react';\nimport moment from 'moment'; // Utils\n\nimport { groupByTime } from '../util/grouping'; // Components\n\nimport BubbleChart from '../../../styles/reporting/BubbleChart';\nimport Flex from '../../../styles/layout/Flex';\nimport styled from 'styled-components';\nimport SalesTable from '../../general/SalesTable';\nvar xLabels = ['12am', '1am', '2am', '3am', '4am', '5am', '6am', '7am', '8am', '9am', '10am', '11am', '12pm', '1pm', '2pm', '3pm', '4pm', '5pm', '6pm', '7pm', '8pm', '9pm', '10pm', '11pm'];\nvar yLabels = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\nvar SalesByDate = memo(function (_ref) {\n  var data = _ref.data;\n\n  var _useState = useState(null),\n      coords = _useState[0],\n      activateCoords = _useState[1];\n\n  var chartData = useMemo(function () {\n    return groupByTime(data);\n  }, [data]);\n  return __jsx(Flex, {\n    flexWrap: \"wrap\"\n  }, __jsx(BubbleChart, {\n    minWidth: \"850px\",\n    isLoading: !data.sales,\n    headerContent: \"Sales By time\",\n    data: chartData.arr,\n    tooltipContent: tooltipContent,\n    xLabels: xLabels,\n    yLabels: yLabels,\n    onClick: function onClick(x, y) {\n      activateCoords({\n        x: x,\n        y: y\n      });\n    }\n  }), coords ? __jsx(PopOut, {\n    xLabels: xLabels,\n    yLabels: yLabels,\n    data: chartData.obj,\n    coords: coords,\n    onClose: function onClose() {\n      return activateCoords(null);\n    }\n  }) : null);\n});\nexport default SalesByDate;\n\nvar PopOut = function PopOut(_ref2) {\n  var data = _ref2.data,\n      xLabels = _ref2.xLabels,\n      yLabels = _ref2.yLabels,\n      _ref2$coords = _ref2.coords,\n      x = _ref2$coords.x,\n      y = _ref2$coords.y,\n      onClose = _ref2.onClose;\n  var time = moment(xLabels[x], 'h a').format('H');\n  var day = yLabels[y].toLowerCase();\n  var sales = data[day][parseInt(time)] || [];\n  return __jsx(SalesTable, {\n    minWidth: \"400px\",\n    data: sales,\n    onClose: onClose,\n    headerContent: \"\".concat(day, \" - \").concat(xLabels[x]),\n    columnLabels: ['date sold', 'username', 'item price']\n  });\n};\n\nvar tooltipContent = function tooltipContent(value, time, day) {\n  return __jsx(Flex, {\n    flexDirection: \"column\"\n  }, __jsx(Flex, null, __jsx(Strong, null, \"Day:\"), \" \", day), __jsx(Flex, null, __jsx(Strong, null, \"Time:\"), \" \", time), __jsx(Flex, null, __jsx(Strong, null, \"Sold:\"), \" \", value, \" \", value === 1 ? 'Item' : 'Items'));\n};\n\nvar Strong = styled.strong.withConfig({\n  displayName: \"SalesByTime__Strong\",\n  componentId: \"sc-1j69m1-0\"\n})([\"margin-right:5px;\"]);","map":null,"metadata":{},"sourceType":"module"}