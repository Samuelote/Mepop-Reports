{"ast":null,"code":"import { UPDATE_FILES, UPDATE_DATA } from '../generalReducer';\nimport { processFiles } from '../../dataProcessing';\nimport { setupLocationKeys } from './keySetup';\nexport var fetchFiles = function fetchFiles(_ref, resolve) {\n  var firebase = _ref.firebase,\n      dispatch = _ref.dispatch;\n  firebase.getUserFiles(function (files) {\n    if (!files) return;\n\n    if (files) {\n      var processedFiles = processFiles(files);\n      dispatch({\n        type: UPDATE_DATA,\n        payload: processedFiles\n      });\n      resolve();\n    }\n\n    dispatch({\n      type: UPDATE_FILES,\n      payload: files\n    });\n    setupLocationKeys({\n      firebase: firebase,\n      dispatch: dispatch\n    });\n  });\n  return null;\n};","map":{"version":3,"sources":["/Users/samuelwood/development/test/mepop-next/src/store/actions/files.js"],"names":["UPDATE_FILES","UPDATE_DATA","processFiles","setupLocationKeys","fetchFiles","resolve","firebase","dispatch","getUserFiles","files","processedFiles","type","payload"],"mappings":"AAAA,SAASA,YAAT,EAAuBC,WAAvB,QAA0C,mBAA1C;AACA,SAASC,YAAT,QAA6B,sBAA7B;AACA,SAASC,iBAAT,QAAkC,YAAlC;AAEA,OAAO,IAAMC,UAAU,GAAG,SAAbA,UAAa,OAAyBC,OAAzB,EAAqC;AAAA,MAAlCC,QAAkC,QAAlCA,QAAkC;AAAA,MAAxBC,QAAwB,QAAxBA,QAAwB;AAC7DD,EAAAA,QAAQ,CAACE,YAAT,CAAsB,UAACC,KAAD,EAAW;AAC/B,QAAI,CAACA,KAAL,EAAY;;AACZ,QAAIA,KAAJ,EAAW;AACT,UAAMC,cAAc,GAAGR,YAAY,CAACO,KAAD,CAAnC;AACAF,MAAAA,QAAQ,CAAC;AAAEI,QAAAA,IAAI,EAAEV,WAAR;AAAqBW,QAAAA,OAAO,EAAEF;AAA9B,OAAD,CAAR;AAEAL,MAAAA,OAAO;AACR;;AAEDE,IAAAA,QAAQ,CAAC;AAAEI,MAAAA,IAAI,EAAEX,YAAR;AAAsBY,MAAAA,OAAO,EAAEH;AAA/B,KAAD,CAAR;AACAN,IAAAA,iBAAiB,CAAC;AAAEG,MAAAA,QAAQ,EAARA,QAAF;AAAYC,MAAAA,QAAQ,EAARA;AAAZ,KAAD,CAAjB;AACD,GAXD;AAYA,SAAO,IAAP;AACD,CAdM","sourcesContent":["import { UPDATE_FILES, UPDATE_DATA } from '../generalReducer'\nimport { processFiles } from '../../dataProcessing'\nimport { setupLocationKeys } from './keySetup'\n\nexport const fetchFiles = ({ firebase, dispatch }, resolve) => {\n  firebase.getUserFiles((files) => {\n    if (!files) return\n    if (files) {\n      const processedFiles = processFiles(files)\n      dispatch({ type: UPDATE_DATA, payload: processedFiles })\n\n      resolve()\n    }\n\n    dispatch({ type: UPDATE_FILES, payload: files })\n    setupLocationKeys({ firebase, dispatch })\n  })\n  return null\n}\n"]},"metadata":{},"sourceType":"module"}