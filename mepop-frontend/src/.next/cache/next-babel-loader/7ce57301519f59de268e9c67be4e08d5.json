{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport { useMemo, useState, memo } from 'react';\nimport { formatNum } from '../util/general';\nimport { groupByCategory } from '../util/grouping';\nimport VertComposedChart from '../../../styles/reporting/VertBarChart';\nimport Flex from '../../../styles/layout/Flex';\nimport ValueBox from '../../../styles/reporting/ValueBox';\nvar SalesByCategory = memo(function (_ref) {\n  var data = _ref.data,\n      hideBoxes = _ref.hideBoxes,\n      halfSize = _ref.halfSize,\n      isBasic = _ref.isBasic;\n\n  var _useState = useState(false),\n      revenue = _useState[0],\n      showRevenue = _useState[1];\n\n  var chartData = useMemo(function () {\n    return groupByCategory(data, revenue);\n  }, [revenue, data]);\n  var max = {\n    gross: chartData[0],\n    sold: chartData[0]\n  };\n  var min = {\n    gross: chartData[0],\n    sold: chartData[0]\n  };\n  chartData.forEach(function (current, i) {\n    if (current['Gross Earnings'] > max.gross['Gross Earnings']) max.gross = current;\n    if (current['Items Sold'] > max.sold['Items Sold']) max.sold = current;\n    if (current['Gross Earnings'] < min.gross['Gross Earnings']) min.gross = current;\n    if (current['Items Sold'] < min.sold['Items Sold']) min.sold = current;\n  });\n  if (!chartData.length) return null;\n\n  if (halfSize) {\n    return __jsx(VertComposedChart, {\n      headerContent: \"Sales By Category\".concat(chartData.length < 15 ? '' : ' - ( Top 15 )'),\n      data: chartData,\n      xdataKey: revenue ? 'Gross Earnings' : 'Items Sold',\n      ydataKey: \"Category\",\n      height: 500,\n      formatTooltip: function formatTooltip(t, l) {\n        return _formatTooltip(t, l, data);\n      },\n      switchLabel: \"Show Earnings\",\n      switchCheck: revenue,\n      switchEvent: function switchEvent() {\n        showRevenue(!revenue);\n      },\n      proOnly: isBasic ? {\n        component: 'Sales by Category',\n        img: 'sales-by-category.png'\n      } : null\n    });\n  }\n\n  return __jsx(Flex, {\n    flexWrap: \"wrap\"\n  }, __jsx(VertComposedChart, {\n    headerContent: \"Sales By Category\".concat(chartData.length < 15 ? '' : ' - ( Top 15 )'),\n    data: chartData,\n    xdataKey: revenue ? 'Gross Earnings' : 'Items Sold',\n    ydataKey: \"Category\",\n    height: 500,\n    formatTooltip: function formatTooltip(t, l) {\n      return _formatTooltip(t, l, data);\n    },\n    switchLabel: \"Show Earnings\",\n    switchCheck: revenue,\n    switchEvent: function switchEvent() {\n      showRevenue(!revenue);\n    },\n    proOnly: isBasic ? {\n      component: 'Sales by Category',\n      img: 'sales-by-category.png'\n    } : null\n  }), !hideBoxes ? __jsx(Flex, {\n    justifyContent: \"space-between\",\n    flexWrap: \"wrap\",\n    alignItems: \"stretch\",\n    maxWidth: \"50%\",\n    flexDirection: \"column\"\n  }, max ? __jsx(React.Fragment, null, __jsx(ValueBox, {\n    minWidth: \"50px\",\n    title: \"Highest Earning Category\",\n    string: true,\n    smallText: true,\n    value: \"\".concat(max.gross.Category, \" - \").concat(formatNum(data.currency_type, max.gross['Gross Earnings']), \" Gross Profit\")\n  }), __jsx(ValueBox, {\n    minWidth: \"50px\",\n    title: \"Most Sold Category\",\n    string: true,\n    smallText: true,\n    value: \"\".concat(max.sold.Category, \" - \").concat(max.sold['Items Sold'], \" Items Sold\")\n  }), __jsx(ValueBox, {\n    minWidth: \"50px\",\n    title: \"Lowest Earning Category\",\n    string: true,\n    smallText: true,\n    value: \"\".concat(min.gross.Category, \" -\").concat(formatNum(data.currency_type, min.gross['Gross Earnings']), \" Gross Profit\")\n  }), __jsx(ValueBox, {\n    minWidth: \"50px\",\n    title: \"Least Sold Category\",\n    string: true,\n    smallText: true,\n    value: \"\".concat(min.sold.Category, \" - \").concat(min.sold['Items Sold'], \" Items Sold\")\n  })) : null) : null);\n});\nexport default SalesByCategory;\n\nvar _formatTooltip = function _formatTooltip(tickItem, label, data) {\n  if (label === 'Gross Earnings') {\n    return \"\".concat(data.currency_type).concat(tickItem.toFixed(2));\n  }\n\n  return tickItem;\n};","map":null,"metadata":{},"sourceType":"module"}