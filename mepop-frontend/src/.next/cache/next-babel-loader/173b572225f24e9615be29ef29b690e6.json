{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport geocodes from '../../../assets/geocodes.json';\nexport var getGeopoints = function getGeopoints(allSales, resolve) {\n  if (!allSales) return;\n  var geocodeRequests = []; // holds addresses that need to be updated\n\n  var newDocObjs = {}; // holds all updated data which will be sent to state\n\n  allSales.sales.forEach(function (doc, i) {\n    var sale = allSales.sales[i];\n    var zip = sale.post_code.trim();\n    geocodeRequests.push(zip);\n    newDocObjs[zip] = {\n      sales: newDocObjs[zip] ? [].concat(_toConsumableArray(newDocObjs[zip].sales), [allSales.sales[i]]) : [allSales.sales[i]],\n      geopoint: {\n        lat: 0,\n        lng: 0\n      },\n      location: {}\n    };\n  });\n\n  if (geocodeRequests.length) {\n    // finds geocode in JSON obj\n    for (var i = 0; i < geocodeRequests.length; i++) {\n      var zip = geocodeRequests[i];\n\n      for (var j = 0; j < geocodes.length; j++) {\n        if (zip === geocodes[j].fields.zip) {\n          newDocObjs[zip].geopoint = {\n            lat: geocodes[j].fields.latitude,\n            lng: geocodes[j].fields.longitude\n          };\n          newDocObjs[zip].location = {\n            city: geocodes[j].fields.city,\n            state: geocodes[j].fields.state,\n            zip: geocodes[j].fields.zip,\n            timezone: geocodes[j].fields.timezone\n          };\n          continue;\n        }\n      }\n    }\n  }\n\n  resolve(newDocObjs);\n};","map":null,"metadata":{},"sourceType":"module"}