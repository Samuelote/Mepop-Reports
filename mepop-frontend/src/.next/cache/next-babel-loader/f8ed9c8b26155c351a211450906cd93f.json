{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport _ from 'lodash';\nimport Table from '../../../styles/elements/Table';\nimport Input from '../../../styles/elements/Input';\nimport Flex from '../../../styles/layout/Flex';\nimport SaleDetails from '../../general/SaleDetails';\nimport Text from '../../../styles/elements/Text';\nimport { formatSalesTable } from '../../reports/util/tables';\n\nvar SaleTable = function SaleTable(_ref) {\n  var data = _ref.data,\n      getUrl = _ref.getUrl;\n  var formattedData = formatSalesTable(data);\n\n  var _useState = useState(''),\n      searchTerm = _useState[0],\n      setTerm = _useState[1];\n\n  var _useState2 = useState(formattedData),\n      tableData = _useState2[0],\n      setTableData = _useState2[1];\n\n  var _useState3 = useState(tableData[0]),\n      activeRow = _useState3[0],\n      activateRow = _useState3[1];\n\n  var idx = tableData.indexOf(activeRow);\n  useEffect(function () {\n    if (!searchTerm) setTableData(data);\n    var filtered = formattedData.filter(function (item) {\n      return item.username.includes(searchTerm) || item.name.includes(searchTerm) || item['date sold'].includes(searchTerm) || item['item price'].includes(searchTerm) || item.name.includes(searchTerm) || item['item description'].includes(searchTerm);\n    });\n    setTableData(filtered);\n  }, [searchTerm, data]);\n  return __jsx(Flex, {\n    mb: \"30px\",\n    flexWrap: \"wrap\"\n  }, __jsx(Table, {\n    minWidth: \"500px\",\n    activeRow: idx,\n    headerContent: __jsx(Header, {\n      data: tableData,\n      setTerm: setTerm,\n      term: searchTerm\n    }),\n    data: tableData,\n    columnLabels: !activeRow ? ['date sold', 'username', 'name', 'item price', 'buyer-paid shipping', 'seller-paid shipping', 'depop fees', 'item description'] : ['date sold', 'username', 'name', 'item price'],\n    handleRowClick: function handleRowClick(row, i) {\n      activateRow(row.rowData);\n    },\n    p: \"0px\",\n    tableHeight: 420 - 40\n  }), activeRow ? __jsx(SaleDetails, {\n    row: activeRow,\n    getUrl: getUrl,\n    onClose: function onClose() {\n      return activateRow(null);\n    },\n    currencyType: data.currency_type\n  }) : null);\n};\n\nexport default SaleTable;\n\nvar Header = function Header(_ref2) {\n  var data = _ref2.data,\n      setTerm = _ref2.setTerm,\n      term = _ref2.term;\n  return __jsx(Flex, {\n    alignItems: \"center\",\n    justifyContent: \"space-between\",\n    width: [1]\n  }, __jsx(Text, {\n    mr: \"5px\"\n  }, \"All Sales - \", data.length), __jsx(Flex, null, __jsx(StyledInput, {\n    borderColor: \"greyLight\",\n    placeholder: \"Search...\",\n    pl: \"10px\",\n    value: term,\n    onChange: function onChange(e) {\n      return setTerm(e.target.value);\n    }\n  })));\n};\n\nvar StyledInput = styled(Input).withConfig({\n  displayName: \"SaleTable__StyledInput\",\n  componentId: \"sc-1iov6uj-0\"\n})([\"border-radius:4px;border-color:\", \";font-weight:\", \";\"], function (_ref3) {\n  var theme = _ref3.theme;\n  return theme.colors.mainBg;\n}, function (_ref4) {\n  var theme = _ref4.theme;\n  return theme.fontWeights.bold;\n});","map":null,"metadata":{},"sourceType":"module"}