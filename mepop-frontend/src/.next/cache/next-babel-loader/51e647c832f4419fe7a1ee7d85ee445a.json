{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport moment from 'moment';\nimport currency from 'currency.js';\nexport var formatSalesTable = function formatSalesTable(_ref, currencyType) {\n  var sales = _ref.sales,\n      currency_type = _ref.currency_type;\n  var newSales = [];\n  sales.forEach(function (sale) {\n    var ms = new Date(sale.date_of_sale).getTime() - new Date(sale.date_of_listing).getTime();\n    var days = ms / (1000 * 3600 * 24);\n    newSales.push(_objectSpread(_objectSpread({}, sale), {}, {\n      'date sold': moment(sale.date_of_sale).format('MM/DD/YYYY'),\n      buyer: \"\".concat(sale.name),\n      username: \"\".concat(sale.buyer),\n      'item price': sale.item_price,\n      'buyer-paid shipping': sale.buyer_shipping_cost,\n      'seller-paid shipping': sale.usps_cost,\n      'depop fees': \"\".concat(currency_type || currencyType).concat(currency(sale.depop_fee).value + currency(sale.depop_payments_fee).value),\n      'date listed': moment(sale.date_of_listing).format('MM/DD/YYYY'),\n      'days listed': days,\n      // converts from ms to days\n      'item description': formatDescription(sale.description),\n      address: \"\".concat(sale.address_line_1, \" \").concat(sale.city, \", \").concat(sale.state ? sale.state : '', \" \").concat(sale.post_code)\n    }));\n  });\n  return sort(newSales);\n};\nexport var getRecentSales = function getRecentSales(_ref2, currencyType) {\n  var sales = _ref2.sales,\n      currency_type = _ref2.currency_type;\n  var sortedSales = sort(sales, 'date_of_sale');\n  var newSales = [];\n  var mostRecentDate = sortedSales[0].date_of_sale;\n  var scndMostRecentDate = moment(mostRecentDate).subtract(1, 'days').format('MM-DD-YYYY');\n  sortedSales.forEach(function (sale) {\n    if (sale.date_of_sale === mostRecentDate || sale.date_of_sale === scndMostRecentDate || newSales.length < 15) {\n      var ms = new Date(sale.date_of_sale).getTime() - new Date(sale.date_of_listing).getTime();\n      var days = ms / (1000 * 3600 * 24);\n      newSales.push(_objectSpread(_objectSpread({}, sale), {}, {\n        'date sold': moment(sale.date_of_sale).format('MM/DD/YYYY'),\n        buyer: \"\".concat(sale.name),\n        username: \"\".concat(sale.buyer),\n        'item price': sale.item_price,\n        'buyer-paid shipping': sale.buyer_shipping_cost,\n        'seller-paid shipping': sale.usps_cost,\n        'depop fees': \"\".concat(currency_type || currencyType).concat(currency(sale.depop_fee).value + currency(sale.depop_payments_fee).value),\n        'date listed': moment(sale.date_of_listing).format('MM/DD/YYYY'),\n        'days listed': days,\n        // converts from ms to days\n        'item description': formatDescription(sale.description),\n        address: \"\".concat(sale.address_line_1, \" \").concat(sale.city, \", \").concat(sale.state ? sale.state : '', \" \").concat(sale.post_code)\n      }));\n    }\n  });\n  return newSales;\n}; // utils\n\nvar sort = function sort(sales, term) {\n  return _toConsumableArray(sales).sort(function (a, b) {\n    var date1 = new Date(a[term || 'date sold']);\n    var date2 = new Date(b[term || 'date sold']);\n    return date2 - date1;\n  });\n};\n\nvar formatDescription = function formatDescription(text) {\n  var tagStart = text.lastIndexOf('{');\n  var withoutTags = tagStart !== -1 ? text.substring(0, tagStart) : text;\n  return withoutTags;\n};","map":{"version":3,"sources":["/Users/samuelwood/development/mepop-reports/mepop-frontend/src/components/reports/util/tables.js"],"names":["moment","currency","formatSalesTable","currencyType","sales","currency_type","newSales","forEach","sale","ms","Date","date_of_sale","getTime","date_of_listing","days","push","format","buyer","name","username","item_price","buyer_shipping_cost","usps_cost","depop_fee","value","depop_payments_fee","formatDescription","description","address","address_line_1","city","state","post_code","sort","getRecentSales","sortedSales","mostRecentDate","scndMostRecentDate","subtract","length","term","a","b","date1","date2","text","tagStart","lastIndexOf","withoutTags","substring"],"mappings":"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","sourcesContent":["import moment from 'moment'\nimport currency from 'currency.js'\n\nexport const formatSalesTable = ({ sales, currency_type }, currencyType) => {\n  const newSales = []\n  sales.forEach((sale) => {\n    const ms = new Date(sale.date_of_sale).getTime() - new Date(sale.date_of_listing).getTime()\n    const days = ms / (1000 * 3600 * 24)\n    newSales.push({\n      ...sale,\n      'date sold': moment(sale.date_of_sale).format('MM/DD/YYYY'),\n      buyer: `${sale.name}`,\n      username: `${sale.buyer}`,\n      'item price': sale.item_price,\n      'buyer-paid shipping': sale.buyer_shipping_cost,\n      'seller-paid shipping': sale.usps_cost,\n      'depop fees': `${currency_type || currencyType}${currency(sale.depop_fee).value + currency(sale.depop_payments_fee).value}`,\n      'date listed': moment(sale.date_of_listing).format('MM/DD/YYYY'),\n      'days listed': days, // converts from ms to days\n      'item description': formatDescription(sale.description),\n      address: `${sale.address_line_1} ${sale.city}, ${sale.state ? sale.state : ''} ${sale.post_code}`\n\n    })\n  })\n  return sort(newSales)\n}\n\nexport const getRecentSales = ({ sales, currency_type }, currencyType) => {\n  const sortedSales = sort(sales, 'date_of_sale')\n  const newSales = []\n  const mostRecentDate = sortedSales[0].date_of_sale\n  const scndMostRecentDate = moment(mostRecentDate).subtract(1, 'days').format('MM-DD-YYYY')\n  sortedSales.forEach((sale) => {\n    if (sale.date_of_sale === mostRecentDate || sale.date_of_sale === scndMostRecentDate || newSales.length < 15) {\n      const ms = new Date(sale.date_of_sale).getTime() - new Date(sale.date_of_listing).getTime()\n      const days = ms / (1000 * 3600 * 24)\n      newSales.push({\n        ...sale,\n        'date sold': moment(sale.date_of_sale).format('MM/DD/YYYY'),\n        buyer: `${sale.name}`,\n        username: `${sale.buyer}`,\n        'item price': sale.item_price,\n        'buyer-paid shipping': sale.buyer_shipping_cost,\n        'seller-paid shipping': sale.usps_cost,\n        'depop fees': `${currency_type || currencyType}${currency(sale.depop_fee).value + currency(sale.depop_payments_fee).value}`,\n        'date listed': moment(sale.date_of_listing).format('MM/DD/YYYY'),\n        'days listed': days, // converts from ms to days\n        'item description': formatDescription(sale.description),\n        address: `${sale.address_line_1} ${sale.city}, ${sale.state ? sale.state : ''} ${sale.post_code}`\n\n      })\n    }\n  })\n  return newSales\n}\n\n// utils\nconst sort = (sales, term) => {\n  return [...sales].sort((a, b) => {\n    const date1 = new Date(a[term || 'date sold'])\n    const date2 = new Date(b[term || 'date sold'])\n    return date2 - date1\n  })\n}\nconst formatDescription = (text) => {\n  const tagStart = text.lastIndexOf('{')\n\n  const withoutTags = tagStart !== -1 ? text.substring(0, tagStart) : text\n  return withoutTags\n}\n"]},"metadata":{},"sourceType":"module"}