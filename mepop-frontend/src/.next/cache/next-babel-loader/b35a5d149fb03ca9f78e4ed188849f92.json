{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport _ from 'lodash';\nimport Table from '../../../styles/elements/Table';\nimport Input from '../../../styles/elements/Input';\nimport Flex from '../../../styles/layout/Flex';\nimport SaleDetails from '../../general/SaleDetails';\nimport Text from '../../../styles/elements/Text';\nimport { formatSalesTable } from '../../reports/util/tables';\n\nconst SaleTable = ({\n  data,\n  getUrl\n}) => {\n  const formattedData = formatSalesTable(data);\n  const {\n    0: searchTerm,\n    1: setTerm\n  } = useState('');\n  const {\n    0: tableData,\n    1: setTableData\n  } = useState(formattedData);\n  const {\n    0: activeRow,\n    1: activateRow\n  } = useState(tableData[0]);\n  const idx = tableData.indexOf(activeRow);\n  useEffect(() => {\n    if (!searchTerm) setTableData(data);\n    const filtered = formattedData.filter(item => {\n      return item.username.includes(searchTerm) || item.name.includes(searchTerm) || item['date sold'].includes(searchTerm) || item['item price'].includes(searchTerm) || item.name.includes(searchTerm) || item['item description'].includes(searchTerm);\n    });\n    setTableData(filtered);\n  }, [searchTerm, data]);\n  return __jsx(Flex, {\n    mb: \"30px\",\n    flexWrap: \"wrap\"\n  }, __jsx(Table, {\n    minWidth: \"500px\",\n    activeRow: idx,\n    headerContent: __jsx(Header, {\n      data: tableData,\n      setTerm: setTerm,\n      term: searchTerm\n    }),\n    data: tableData,\n    columnLabels: !activeRow ? ['date sold', 'username', 'name', 'item price', 'buyer-paid shipping', 'seller-paid shipping', 'depop fees', 'item description'] : ['date sold', 'username', 'name', 'item price'],\n    handleRowClick: (row, i) => {\n      activateRow(row.rowData);\n    },\n    p: \"0px\",\n    tableHeight: 420 - 40\n  }), activeRow ? __jsx(SaleDetails, {\n    row: activeRow,\n    getUrl: getUrl,\n    onClose: () => activateRow(null),\n    currencyType: data.currency_type\n  }) : null);\n};\n\nexport default SaleTable;\n\nconst Header = ({\n  data,\n  setTerm,\n  term\n}) => {\n  return __jsx(Flex, {\n    alignItems: \"center\",\n    justifyContent: \"space-between\",\n    width: [1]\n  }, __jsx(Text, {\n    mr: \"5px\"\n  }, \"All Sales - \", data.length), __jsx(Flex, null, __jsx(StyledInput, {\n    borderColor: \"greyLight\",\n    placeholder: \"Search...\",\n    pl: \"10px\",\n    value: term,\n    onChange: e => setTerm(e.target.value)\n  })));\n};\n\nconst StyledInput = styled(Input).withConfig({\n  displayName: \"SaleTable__StyledInput\",\n  componentId: \"sc-1iov6uj-0\"\n})([\"border-radius:4px;border-color:\", \";font-weight:\", \";\"], ({\n  theme\n}) => theme.colors.mainBg, ({\n  theme\n}) => theme.fontWeights.bold);","map":null,"metadata":{},"sourceType":"module"}