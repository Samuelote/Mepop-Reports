{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/samuelwood/development/mepop-firebase/packages/mepop-next/src/components/files/FileDrop.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { withFirebase } from '../../firebase';\nimport { useState, useCallback, useEffect } from 'react';\nimport { useDropzone } from 'react-dropzone';\nimport styled from 'styled-components';\nimport Card from '../../styles/elements/Card';\nimport Flex from '../../styles/layout/Flex';\nimport Button from '../../styles/elements/Button';\nimport Tooltip from '../../styles/elements/Tooltip';\nimport Text from '../../styles/elements/Text';\nimport { fetchFiles } from '../../store/actions/files';\nimport { useSelector, useDispatch } from 'react-redux';\nimport Spinner from '../../styles/elements/Loading/Spinner';\nimport InfoModal from './InfoModal';\nimport { useToasts } from 'react-toast-notifications';\nvar Dropzone = withFirebase(_c = _s(function (_ref) {\n  _s();\n\n  var firebase = _ref.firebase;\n  var dispatch = useDispatch();\n\n  var _useToasts = useToasts(),\n      addToast = _useToasts.addToast;\n\n  var _useSelector = useSelector(function (state) {\n    return state.generalReducer;\n  }),\n      files = _useSelector.files;\n\n  var _useState = useState(files.length),\n      loading = _useState[0],\n      setLoading = _useState[1];\n\n  var _useState2 = useState(false),\n      buttonDisable = _useState2[0],\n      disableBtns = _useState2[1];\n\n  var _useState3 = useState(null),\n      activeBtn = _useState3[0],\n      activateBtn = _useState3[1];\n\n  var _useState4 = useState(false),\n      modalIsOpen = _useState4[0],\n      toggleModal = _useState4[1];\n\n  var startFetch = useCallback(function () {\n    var load = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    if (load) setLoading(true);\n    disableBtns(true);\n    fetchFiles({\n      firebase: firebase,\n      dispatch: dispatch\n    }, function () {\n      setLoading(false);\n      disableBtns(false);\n      activateBtn(null);\n    });\n  }, []);\n  useEffect(function () {\n    setLoading(true);\n    startFetch();\n  }, [startFetch]);\n\n  var onError = function onError(msg) {\n    addToast(__jsx(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 14\n      }\n    }, msg || 'Error Occurred'), {\n      appearance: 'error'\n    });\n    setLoading(false);\n    disableBtns(false);\n  };\n\n  var onDrop = useCallback(function (acceptedFiles) {\n    if (acceptedFiles.length) {\n      firebase.uploadFiles(acceptedFiles, startFetch, onError);\n    }\n  }, []);\n\n  var _useDropzone = useDropzone({\n    onDrop: onDrop,\n    accept: '.csv'\n  }),\n      getRootProps = _useDropzone.getRootProps,\n      getInputProps = _useDropzone.getInputProps,\n      isDragActive = _useDropzone.isDragActive;\n\n  var deleteFile = function deleteFile(filename) {\n    firebase.deleteFile(filename, function (file) {\n      // success! Now remove that file from local state or refresh files in some way.\n      startFetch(false);\n    });\n  };\n\n  return __jsx(Container, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 5\n    }\n  }, __jsx(InfoModal, {\n    modalIsOpen: modalIsOpen,\n    toggleModal: toggleModal,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }\n  }), __jsx(Flex, {\n    justifyContent: \"flex-end\",\n    px: \"10px\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }\n  }, __jsx(Tooltip, {\n    title: \"What's this?\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 9\n    }\n  }, __jsx(Button, {\n    bg: \"transparent\",\n    color: \"greyDarkest\",\n    fontSize: \"20px\",\n    onClick: function onClick() {\n      return toggleModal(!modalIsOpen);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 11\n    }\n  }, __jsx(\"i\", {\n    className: \"fa fa-question-circle\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }\n  })))), __jsx(DropZone, _extends({\n    isDragActive: isDragActive\n  }, getRootProps(), {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }\n  }), __jsx(\"input\", _extends({}, getInputProps(), {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }\n  })), __jsx(H2, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }\n  }, \"Drop files here\"), __jsx(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }\n  }, \"or\"), __jsx(Button, {\n    color: \"blue\",\n    bg: \"white\",\n    size: \"lg\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }\n  }, \"Select Files\"), __jsx(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }\n  }, \"Files must be from Depop to be valid\")), __jsx(Card, {\n    headerContent: \"Uploaded Files\",\n    isLoading: loading,\n    minHeight: \"200px\",\n    mb: \"100px\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }\n  }, files.length ? __jsx(Table, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 17\n    }\n  }, files.map(function (_ref2, i) {\n    var filename = _ref2.filename;\n    return __jsx(Row, {\n      key: i,\n      index: i,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 19\n      }\n    }, __jsx(Tooltip, {\n      title: \"Delete file\",\n      arrow: false,\n      position: \"right\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 21\n      }\n    }, __jsx(DeleteBtn, {\n      disabled: buttonDisable,\n      \"aria-label\": \"Click to delete \".concat(filename),\n      onClick: function onClick() {\n        deleteFile(filename);\n        activateBtn(i);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 23\n      }\n    }, buttonDisable && activeBtn === i ? __jsx(Spinner, {\n      width: \"9px\",\n      color: \"red\",\n      size: \"2\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 29\n      }\n    }) : __jsx(\"i\", {\n      className: \"fa fa-close\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 29\n      }\n    }))), filename);\n  })) : __jsx(Text, {\n    fontSize: \"20px\",\n    pt: \"1em\",\n    color: \"greyDark\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 17\n    }\n  }, \"Upload Files Above\")));\n}, \"saGNMyeb6bLHqcyqbp38zKXvcA0=\", false, function () {\n  return [useDispatch, useToasts, useSelector, useDropzone];\n}));\n_c2 = Dropzone;\nexport default Dropzone;\nvar Container = styled.div.withConfig({\n  displayName: \"FileDrop__Container\",\n  componentId: \"sc-3bbzl8-0\"\n})([\"width:100%;\"]);\n_c3 = Container;\nvar DropZone = styled(Flex).withConfig({\n  displayName: \"FileDrop__DropZone\",\n  componentId: \"sc-3bbzl8-1\"\n})([\"justify-content:center;align-items:center;flex-direction:column;display:flex;justify-content:center;align-items:center;margin:15px;min-height:250px;margin-top:10px;transition:.2s;position:relative;border:5px dashed \", \";border-radius:\", \";\"], function (_ref3) {\n  var theme = _ref3.theme,\n      isDragActive = _ref3.isDragActive;\n  return isDragActive ? theme.colors.greyDark : theme.colors.greyLight;\n}, function (_ref4) {\n  var theme = _ref4.theme,\n      isDragActive = _ref4.isDragActive;\n  return isDragActive ? theme.borderRadius.more : theme.borderRadius.normal;\n});\n_c4 = DropZone;\nvar H2 = styled.h2.withConfig({\n  displayName: \"FileDrop__H2\",\n  componentId: \"sc-3bbzl8-2\"\n})([\"margin:0;margin-top:10px;font-weight:\", \";\"], function (_ref5) {\n  var theme = _ref5.theme;\n  return theme.fontWeights.regular;\n});\n_c5 = H2;\nvar Row = styled.div.withConfig({\n  displayName: \"FileDrop__Row\",\n  componentId: \"sc-3bbzl8-3\"\n})([\"display:flex;align-items:center;width:100%;padding:3px 0px 3px 5px;border-bottom:\", \" 1px solid;\"], function (_ref6) {\n  var theme = _ref6.theme,\n      key = _ref6.key;\n  return theme.colors.mainBg;\n});\n_c6 = Row;\nvar DeleteBtn = styled.button.withConfig({\n  displayName: \"FileDrop__DeleteBtn\",\n  componentId: \"sc-3bbzl8-4\"\n})([\"margin-right:5px;cursor:pointer;color:\", \";height:25px;width:25px;display:flex;justify-content:center;align-items:center;flex-direction &:hover{color:\", \";}\"], function (_ref7) {\n  var theme = _ref7.theme;\n  return theme.colors.red;\n}, function (_ref8) {\n  var theme = _ref8.theme;\n  return theme.colors.redDark;\n});\n_c7 = DeleteBtn;\nvar Table = styled.div.withConfig({\n  displayName: \"FileDrop__Table\",\n  componentId: \"sc-3bbzl8-5\"\n})([\"max-height:250px;overflow:auto;width:100%;\"]);\n_c8 = Table;\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8;\n\n$RefreshReg$(_c, \"Dropzone$withFirebase\");\n$RefreshReg$(_c2, \"Dropzone\");\n$RefreshReg$(_c3, \"Container\");\n$RefreshReg$(_c4, \"DropZone\");\n$RefreshReg$(_c5, \"H2\");\n$RefreshReg$(_c6, \"Row\");\n$RefreshReg$(_c7, \"DeleteBtn\");\n$RefreshReg$(_c8, \"Table\");","map":{"version":3,"sources":["/Users/samuelwood/development/mepop-firebase/packages/mepop-next/src/components/files/FileDrop.js"],"names":["withFirebase","useState","useCallback","useEffect","useDropzone","styled","Card","Flex","Button","Tooltip","Text","fetchFiles","useSelector","useDispatch","Spinner","InfoModal","useToasts","Dropzone","firebase","dispatch","addToast","state","generalReducer","files","length","loading","setLoading","buttonDisable","disableBtns","activeBtn","activateBtn","modalIsOpen","toggleModal","startFetch","load","onError","msg","appearance","onDrop","acceptedFiles","uploadFiles","accept","getRootProps","getInputProps","isDragActive","deleteFile","filename","file","map","i","Container","div","DropZone","theme","colors","greyDark","greyLight","borderRadius","more","normal","H2","h2","fontWeights","regular","Row","key","mainBg","DeleteBtn","button","red","redDark","Table"],"mappings":"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","sourcesContent":["import { withFirebase } from '../../firebase'\nimport { useState, useCallback, useEffect } from 'react'\nimport { useDropzone } from 'react-dropzone'\nimport styled from 'styled-components'\n\nimport Card from '../../styles/elements/Card'\nimport Flex from '../../styles/layout/Flex'\nimport Button from '../../styles/elements/Button'\nimport Tooltip from '../../styles/elements/Tooltip'\nimport Text from '../../styles/elements/Text'\nimport { fetchFiles } from '../../store/actions/files'\nimport { useSelector, useDispatch } from 'react-redux'\nimport Spinner from '../../styles/elements/Loading/Spinner'\nimport InfoModal from './InfoModal'\nimport { useToasts } from 'react-toast-notifications'\n\nconst Dropzone = withFirebase(({ firebase }) => {\n  const dispatch = useDispatch()\n  const { addToast } = useToasts()\n  const { files } = useSelector(state => state.generalReducer)\n  const [loading, setLoading] = useState(files.length)\n  const [buttonDisable, disableBtns] = useState(false)\n  const [activeBtn, activateBtn] = useState(null)\n  const [modalIsOpen, toggleModal] = useState(false)\n  const startFetch = useCallback((load = true) => {\n    if (load) setLoading(true)\n    disableBtns(true)\n    fetchFiles({ firebase, dispatch }, () => {\n      setLoading(false)\n      disableBtns(false)\n      activateBtn(null)\n    })\n  }, [])\n  useEffect(() => {\n    setLoading(true)\n    startFetch()\n  }, [startFetch])\n\n  const onError = (msg) => {\n    addToast(<div>{msg || 'Error Occurred'}</div>, {\n      appearance: 'error'\n    })\n    setLoading(false)\n    disableBtns(false)\n  }\n  const onDrop = useCallback(acceptedFiles => {\n    if (acceptedFiles.length) {\n      firebase.uploadFiles(acceptedFiles, startFetch, onError)\n    }\n  }, [])\n\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({\n    onDrop,\n    accept: '.csv'\n  })\n\n  const deleteFile = (filename) => {\n    firebase.deleteFile(filename, (file) => {\n      // success! Now remove that file from local state or refresh files in some way.\n      startFetch(false)\n    })\n  }\n\n  return (\n\n    <Container>\n      <InfoModal modalIsOpen={modalIsOpen} toggleModal={toggleModal} />\n      <Flex justifyContent='flex-end' px='10px'>\n        <Tooltip title=\"What's this?\">\n          <Button\n            bg='transparent'\n            color='greyDarkest'\n            fontSize='20px'\n            onClick={() => toggleModal(!modalIsOpen)}\n          >\n            <i className='fa fa-question-circle' />\n          </Button>\n        </Tooltip>\n      </Flex>\n\n      <DropZone isDragActive={isDragActive} {...getRootProps()}>\n        <input {...getInputProps()} />\n        <H2>\n            Drop files here\n        </H2>\n        <p>or</p>\n        <Button color='blue' bg='white' size='lg'>Select Files</Button>\n        <p>Files must be from Depop to be valid</p>\n      </DropZone>\n      {\n        <Card headerContent='Uploaded Files' isLoading={loading} minHeight='200px' mb='100px'>\n          {\n            files.length\n              ? (\n                <Table>{files.map(({ filename }, i) => (\n                  <Row key={i} index={i}>\n                    <Tooltip\n                      title='Delete file'\n                      arrow={false}\n                      position='right'\n                    >\n                      <DeleteBtn\n                        disabled={buttonDisable}\n                        aria-label={`Click to delete ${filename}`}\n                        onClick={() => {\n                          deleteFile(filename)\n                          activateBtn(i)\n                        }}\n                      >\n                        {\n                          buttonDisable && activeBtn === i ? (\n                            <Spinner width='9px' color='red' size='2' />\n                          ) : (\n                            <i\n                              className='fa fa-close'\n                            />\n                          )\n                        }\n                      </DeleteBtn>\n                    </Tooltip>\n                    {filename}\n                  </Row>\n                )\n                )}\n                </Table>\n              )\n              : <Text fontSize='20px' pt='1em' color='greyDark'>Upload Files Above</Text>\n          }\n\n        </Card>\n      }\n\n    </Container>\n  )\n})\n\nexport default Dropzone\n\nconst Container = styled.div`\n  width:100%;\n`\n\nconst DropZone = styled(Flex)`\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin: 15px;\n  min-height: 250px;\n  margin-top: 10px;\n  transition: .2s;\n  position:relative;\n  border: 5px dashed ${({ theme, isDragActive }) => isDragActive ? theme.colors.greyDark : theme.colors.greyLight};\n  border-radius: ${({ theme, isDragActive }) => isDragActive ? theme.borderRadius.more : theme.borderRadius.normal};\n`\n\nconst H2 = styled.h2`\n    margin: 0;\n    margin-top: 10px;\n    font-weight: ${({ theme }) => theme.fontWeights.regular};\n`\nconst Row = styled.div`\n  display: flex;\n  align-items: center;\n  width: 100%;\n  padding: 3px 0px 3px 5px;\n  border-bottom: ${({ theme, key }) => theme.colors.mainBg} 1px solid;\n  /* background: ${({ theme, index }) => index % 2 === 0 ? theme.colors.mainBg : theme.colors.greyLighter}; */\n`\nconst DeleteBtn = styled.button`\n  margin-right: 5px;\n  cursor: pointer;\n  color: ${({ theme }) => theme.colors.red};\n  height: 25px;\n  width: 25px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction\n  &:hover {\n    color: ${({ theme }) => theme.colors.redDark};\n  }\n`\nconst Table = styled.div`\n  max-height: 250px;\n  overflow: auto;\n  width: 100%;\n`\n"]},"metadata":{},"sourceType":"module"}