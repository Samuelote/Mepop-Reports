{"ast":null,"code":"var _jsxFileName = \"/Users/samuelwood/development/mepop-reports/mepop-frontend/src/components/files/FileDrop.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport { withFirebase } from '../../firebase';\nimport { useState, useCallback, useEffect } from 'react';\nimport { useDropzone } from 'react-dropzone';\nimport styled from 'styled-components';\nimport Card from '../../styles/elements/Card';\nimport Flex from '../../styles/layout/Flex';\nimport Button from '../../styles/elements/Button';\nimport Tooltip from '../../styles/elements/Tooltip';\nimport Text from '../../styles/elements/Text';\nimport { fetchFiles } from '../../store/actions/files';\nimport { useSelector, useDispatch } from 'react-redux';\nimport Spinner from '../../styles/elements/Loading/Spinner';\nimport InfoModal from './InfoModal';\nimport { useToasts } from 'react-toast-notifications';\nconst Dropzone = withFirebase(({\n  firebase\n}) => {\n  const dispatch = useDispatch();\n  const {\n    addToast\n  } = useToasts();\n  const {\n    files\n  } = useSelector(state => state.generalReducer);\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(files.length);\n  const {\n    0: buttonDisable,\n    1: disableBtns\n  } = useState(false);\n  const {\n    0: activeBtn,\n    1: activateBtn\n  } = useState(null);\n  const {\n    0: modalIsOpen,\n    1: toggleModal\n  } = useState(false);\n  const startFetch = useCallback((load = true) => {\n    if (load) setLoading(true);\n    disableBtns(true);\n    fetchFiles({\n      firebase,\n      dispatch\n    }, () => {\n      setLoading(false);\n      disableBtns(false);\n      activateBtn(null);\n    });\n  }, []);\n  useEffect(() => {\n    setLoading(true);\n    startFetch();\n  }, [startFetch]);\n\n  const onError = (msg, dismiss) => {\n    addToast(__jsx(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 14\n      }\n    }, msg || 'Error Occurred'), {\n      appearance: 'error',\n      autoDismiss: dismiss\n    });\n    setLoading(false);\n    disableBtns(false);\n  };\n\n  const onDrop = useCallback(acceptedFiles => {\n    if (acceptedFiles.length) {\n      firebase.uploadFiles(acceptedFiles, startFetch, onError);\n    } else {\n      onError('File appears to be of wrong format.', true);\n    }\n  }, []);\n  const {\n    getRootProps,\n    getInputProps,\n    isDragActive\n  } = useDropzone({\n    onDrop,\n    accept: '.csv'\n  });\n\n  const deleteFile = filename => {\n    firebase.deleteFile(filename, file => {\n      // success! Now remove that file from local state or refresh files in some way.\n      startFetch(false);\n    });\n  };\n\n  return __jsx(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 5\n    }\n  }, __jsx(InfoModal, {\n    modalIsOpen: modalIsOpen,\n    toggleModal: toggleModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }\n  }), __jsx(Flex, {\n    justifyContent: \"flex-end\",\n    px: \"10px\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }\n  }, __jsx(Tooltip, {\n    title: \"What's this?\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }\n  }, __jsx(Button, {\n    bg: \"transparent\",\n    color: \"greyDarkest\",\n    fontSize: \"20px\",\n    onClick: () => toggleModal(!modalIsOpen),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 11\n    }\n  }, __jsx(\"i\", {\n    className: \"fa fa-question-circle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }\n  })))), __jsx(DropZone, _extends({\n    isDragActive: isDragActive\n  }, getRootProps(), {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }\n  }), __jsx(\"input\", _extends({}, getInputProps(), {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 9\n    }\n  })), __jsx(H2, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }\n  }, \"Drop files here\"), __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }\n  }, \"or\"), __jsx(Button, {\n    color: \"blue\",\n    bg: \"white\",\n    size: \"lg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 9\n    }\n  }, \"Select Files\"), __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }\n  }, \"Files must be from Depop to be valid\")), __jsx(Card, {\n    headerContent: \"Uploaded Files\",\n    isLoading: loading,\n    minHeight: \"200px\",\n    mb: \"100px\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }\n  }, files.length ? __jsx(Table, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 17\n    }\n  }, files.map(({\n    filename\n  }, i) => __jsx(Row, {\n    key: i,\n    index: i,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 19\n    }\n  }, __jsx(Tooltip, {\n    title: \"Delete file\",\n    arrow: false,\n    position: \"right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 21\n    }\n  }, __jsx(DeleteBtn, {\n    disabled: buttonDisable,\n    \"aria-label\": `Click to delete ${filename}`,\n    onClick: () => {\n      deleteFile(filename);\n      activateBtn(i);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 23\n    }\n  }, buttonDisable && activeBtn === i ? __jsx(Spinner, {\n    width: \"9px\",\n    color: \"red\",\n    size: \"2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 29\n    }\n  }) : __jsx(\"i\", {\n    className: \"fa fa-close\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 29\n    }\n  }))), filename))) : __jsx(Text, {\n    fontSize: \"20px\",\n    pt: \"1em\",\n    color: \"greyDark\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 17\n    }\n  }, \"Upload Files Above\")));\n});\nexport default Dropzone;\nconst Container = styled.div.withConfig({\n  displayName: \"FileDrop__Container\",\n  componentId: \"sc-3bbzl8-0\"\n})([\"width:100%;\"]);\nconst DropZone = styled(Flex).withConfig({\n  displayName: \"FileDrop__DropZone\",\n  componentId: \"sc-3bbzl8-1\"\n})([\"justify-content:center;align-items:center;flex-direction:column;display:flex;justify-content:center;align-items:center;margin:15px;min-height:250px;margin-top:10px;transition:.2s;position:relative;border:5px dashed \", \";border-radius:\", \";\"], ({\n  theme,\n  isDragActive\n}) => isDragActive ? theme.colors.greyDark : theme.colors.greyLight, ({\n  theme,\n  isDragActive\n}) => isDragActive ? theme.borderRadius.more : theme.borderRadius.normal);\nconst H2 = styled.h2.withConfig({\n  displayName: \"FileDrop__H2\",\n  componentId: \"sc-3bbzl8-2\"\n})([\"margin:0;margin-top:10px;font-weight:\", \";\"], ({\n  theme\n}) => theme.fontWeights.regular);\nconst Row = styled.div.withConfig({\n  displayName: \"FileDrop__Row\",\n  componentId: \"sc-3bbzl8-3\"\n})([\"display:flex;align-items:center;width:100%;padding:3px 0px 3px 5px;border-bottom:\", \" 1px solid;\"], ({\n  theme,\n  key\n}) => theme.colors.mainBg);\nconst DeleteBtn = styled.button.withConfig({\n  displayName: \"FileDrop__DeleteBtn\",\n  componentId: \"sc-3bbzl8-4\"\n})([\"margin-right:5px;cursor:pointer;color:\", \";height:25px;width:25px;display:flex;justify-content:center;align-items:center;flex-direction &:hover{color:\", \";}\"], ({\n  theme\n}) => theme.colors.red, ({\n  theme\n}) => theme.colors.redDark);\nconst Table = styled.div.withConfig({\n  displayName: \"FileDrop__Table\",\n  componentId: \"sc-3bbzl8-5\"\n})([\"max-height:250px;overflow:auto;width:100%;\"]);","map":{"version":3,"sources":["/Users/samuelwood/development/mepop-reports/mepop-frontend/src/components/files/FileDrop.js"],"names":["withFirebase","useState","useCallback","useEffect","useDropzone","styled","Card","Flex","Button","Tooltip","Text","fetchFiles","useSelector","useDispatch","Spinner","InfoModal","useToasts","Dropzone","firebase","dispatch","addToast","files","state","generalReducer","loading","setLoading","length","buttonDisable","disableBtns","activeBtn","activateBtn","modalIsOpen","toggleModal","startFetch","load","onError","msg","dismiss","appearance","autoDismiss","onDrop","acceptedFiles","uploadFiles","getRootProps","getInputProps","isDragActive","accept","deleteFile","filename","file","map","i","Container","div","DropZone","theme","colors","greyDark","greyLight","borderRadius","more","normal","H2","h2","fontWeights","regular","Row","key","mainBg","DeleteBtn","button","red","redDark","Table"],"mappings":";;;;;;AAAA,SAASA,YAAT,QAA6B,gBAA7B;AACA,SAASC,QAAT,EAAmBC,WAAnB,EAAgCC,SAAhC,QAAiD,OAAjD;AACA,SAASC,WAAT,QAA4B,gBAA5B;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AAEA,OAAOC,IAAP,MAAiB,4BAAjB;AACA,OAAOC,IAAP,MAAiB,0BAAjB;AACA,OAAOC,MAAP,MAAmB,8BAAnB;AACA,OAAOC,OAAP,MAAoB,+BAApB;AACA,OAAOC,IAAP,MAAiB,4BAAjB;AACA,SAASC,UAAT,QAA2B,2BAA3B;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,OAAOC,OAAP,MAAoB,uCAApB;AACA,OAAOC,SAAP,MAAsB,aAAtB;AACA,SAASC,SAAT,QAA0B,2BAA1B;AAEA,MAAMC,QAAQ,GAAGjB,YAAY,CAAC,CAAC;AAAEkB,EAAAA;AAAF,CAAD,KAAkB;AAC9C,QAAMC,QAAQ,GAAGN,WAAW,EAA5B;AACA,QAAM;AAAEO,IAAAA;AAAF,MAAeJ,SAAS,EAA9B;AACA,QAAM;AAAEK,IAAAA;AAAF,MAAYT,WAAW,CAACU,KAAK,IAAIA,KAAK,CAACC,cAAhB,CAA7B;AACA,QAAM;AAAA,OAACC,OAAD;AAAA,OAAUC;AAAV,MAAwBxB,QAAQ,CAACoB,KAAK,CAACK,MAAP,CAAtC;AACA,QAAM;AAAA,OAACC,aAAD;AAAA,OAAgBC;AAAhB,MAA+B3B,QAAQ,CAAC,KAAD,CAA7C;AACA,QAAM;AAAA,OAAC4B,SAAD;AAAA,OAAYC;AAAZ,MAA2B7B,QAAQ,CAAC,IAAD,CAAzC;AACA,QAAM;AAAA,OAAC8B,WAAD;AAAA,OAAcC;AAAd,MAA6B/B,QAAQ,CAAC,KAAD,CAA3C;AACA,QAAMgC,UAAU,GAAG/B,WAAW,CAAC,CAACgC,IAAI,GAAG,IAAR,KAAiB;AAC9C,QAAIA,IAAJ,EAAUT,UAAU,CAAC,IAAD,CAAV;AACVG,IAAAA,WAAW,CAAC,IAAD,CAAX;AACAjB,IAAAA,UAAU,CAAC;AAAEO,MAAAA,QAAF;AAAYC,MAAAA;AAAZ,KAAD,EAAyB,MAAM;AACvCM,MAAAA,UAAU,CAAC,KAAD,CAAV;AACAG,MAAAA,WAAW,CAAC,KAAD,CAAX;AACAE,MAAAA,WAAW,CAAC,IAAD,CAAX;AACD,KAJS,CAAV;AAKD,GAR6B,EAQ3B,EAR2B,CAA9B;AASA3B,EAAAA,SAAS,CAAC,MAAM;AACdsB,IAAAA,UAAU,CAAC,IAAD,CAAV;AACAQ,IAAAA,UAAU;AACX,GAHQ,EAGN,CAACA,UAAD,CAHM,CAAT;;AAKA,QAAME,OAAO,GAAG,CAACC,GAAD,EAAMC,OAAN,KAAkB;AAChCjB,IAAAA,QAAQ,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAMgB,GAAG,IAAI,gBAAb,CAAD,EAAuC;AAC7CE,MAAAA,UAAU,EAAE,OADiC;AAE7CC,MAAAA,WAAW,EAAEF;AAFgC,KAAvC,CAAR;AAIAZ,IAAAA,UAAU,CAAC,KAAD,CAAV;AACAG,IAAAA,WAAW,CAAC,KAAD,CAAX;AACD,GAPD;;AAQA,QAAMY,MAAM,GAAGtC,WAAW,CAACuC,aAAa,IAAI;AAC1C,QAAIA,aAAa,CAACf,MAAlB,EAA0B;AACxBR,MAAAA,QAAQ,CAACwB,WAAT,CAAqBD,aAArB,EAAoCR,UAApC,EAAgDE,OAAhD;AACD,KAFD,MAEO;AACLA,MAAAA,OAAO,CAAC,qCAAD,EAAwC,IAAxC,CAAP;AACD;AACF,GANyB,EAMvB,EANuB,CAA1B;AAQA,QAAM;AAAEQ,IAAAA,YAAF;AAAgBC,IAAAA,aAAhB;AAA+BC,IAAAA;AAA/B,MAAgDzC,WAAW,CAAC;AAChEoC,IAAAA,MADgE;AAEhEM,IAAAA,MAAM,EAAE;AAFwD,GAAD,CAAjE;;AAKA,QAAMC,UAAU,GAAIC,QAAD,IAAc;AAC/B9B,IAAAA,QAAQ,CAAC6B,UAAT,CAAoBC,QAApB,EAA+BC,IAAD,IAAU;AACtC;AACAhB,MAAAA,UAAU,CAAC,KAAD,CAAV;AACD,KAHD;AAID,GALD;;AAOA,SAEE,MAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,SAAD;AAAW,IAAA,WAAW,EAAEF,WAAxB;AAAqC,IAAA,WAAW,EAAEC,WAAlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAEE,MAAC,IAAD;AAAM,IAAA,cAAc,EAAC,UAArB;AAAgC,IAAA,EAAE,EAAC,MAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,OAAD;AAAS,IAAA,KAAK,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,MAAD;AACE,IAAA,EAAE,EAAC,aADL;AAEE,IAAA,KAAK,EAAC,aAFR;AAGE,IAAA,QAAQ,EAAC,MAHX;AAIE,IAAA,OAAO,EAAE,MAAMA,WAAW,CAAC,CAACD,WAAF,CAJ5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAME;AAAG,IAAA,SAAS,EAAC,uBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IANF,CADF,CADF,CAFF,EAeE,MAAC,QAAD;AAAU,IAAA,YAAY,EAAEc;AAAxB,KAA0CF,YAAY,EAAtD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MACE,4BAAWC,aAAa,EAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KADF,EAEE,MAAC,EAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAFF,EAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UALF,EAME,MAAC,MAAD;AAAQ,IAAA,KAAK,EAAC,MAAd;AAAqB,IAAA,EAAE,EAAC,OAAxB;AAAgC,IAAA,IAAI,EAAC,IAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBANF,EAOE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4CAPF,CAfF,EAyBI,MAAC,IAAD;AAAM,IAAA,aAAa,EAAC,gBAApB;AAAqC,IAAA,SAAS,EAAEpB,OAAhD;AAAyD,IAAA,SAAS,EAAC,OAAnE;AAA2E,IAAA,EAAE,EAAC,OAA9E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEIH,KAAK,CAACK,MAAN,GAEI,MAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAQL,KAAK,CAAC6B,GAAN,CAAU,CAAC;AAAEF,IAAAA;AAAF,GAAD,EAAeG,CAAf,KAChB,MAAC,GAAD;AAAK,IAAA,GAAG,EAAEA,CAAV;AAAa,IAAA,KAAK,EAAEA,CAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,OAAD;AACE,IAAA,KAAK,EAAC,aADR;AAEE,IAAA,KAAK,EAAE,KAFT;AAGE,IAAA,QAAQ,EAAC,OAHX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAKE,MAAC,SAAD;AACE,IAAA,QAAQ,EAAExB,aADZ;AAEE,kBAAa,mBAAkBqB,QAAS,EAF1C;AAGE,IAAA,OAAO,EAAE,MAAM;AACbD,MAAAA,UAAU,CAACC,QAAD,CAAV;AACAlB,MAAAA,WAAW,CAACqB,CAAD,CAAX;AACD,KANH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KASIxB,aAAa,IAAIE,SAAS,KAAKsB,CAA/B,GACE,MAAC,OAAD;AAAS,IAAA,KAAK,EAAC,KAAf;AAAqB,IAAA,KAAK,EAAC,KAA3B;AAAiC,IAAA,IAAI,EAAC,GAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,GAGE;AACE,IAAA,SAAS,EAAC,aADZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAZN,CALF,CADF,EAyBGH,QAzBH,CADM,CAAR,CAFJ,GAkCI,MAAC,IAAD;AAAM,IAAA,QAAQ,EAAC,MAAf;AAAsB,IAAA,EAAE,EAAC,KAAzB;AAA+B,IAAA,KAAK,EAAC,UAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BApCR,CAzBJ,CAFF;AAuED,CAzH4B,CAA7B;AA2HA,eAAe/B,QAAf;AAEA,MAAMmC,SAAS,GAAG/C,MAAM,CAACgD,GAAV;AAAA;AAAA;AAAA,mBAAf;AAIA,MAAMC,QAAQ,GAAGjD,MAAM,CAACE,IAAD,CAAT;AAAA;AAAA;AAAA,wPAYS,CAAC;AAAEgD,EAAAA,KAAF;AAASV,EAAAA;AAAT,CAAD,KAA6BA,YAAY,GAAGU,KAAK,CAACC,MAAN,CAAaC,QAAhB,GAA2BF,KAAK,CAACC,MAAN,CAAaE,SAZ1F,EAaK,CAAC;AAAEH,EAAAA,KAAF;AAASV,EAAAA;AAAT,CAAD,KAA6BA,YAAY,GAAGU,KAAK,CAACI,YAAN,CAAmBC,IAAtB,GAA6BL,KAAK,CAACI,YAAN,CAAmBE,MAb9F,CAAd;AAgBA,MAAMC,EAAE,GAAGzD,MAAM,CAAC0D,EAAV;AAAA;AAAA;AAAA,mDAGW,CAAC;AAAER,EAAAA;AAAF,CAAD,KAAeA,KAAK,CAACS,WAAN,CAAkBC,OAH5C,CAAR;AAKA,MAAMC,GAAG,GAAG7D,MAAM,CAACgD,GAAV;AAAA;AAAA;AAAA,yGAKU,CAAC;AAAEE,EAAAA,KAAF;AAASY,EAAAA;AAAT,CAAD,KAAoBZ,KAAK,CAACC,MAAN,CAAaY,MAL3C,CAAT;AAQA,MAAMC,SAAS,GAAGhE,MAAM,CAACiE,MAAV;AAAA;AAAA;AAAA,qKAGJ,CAAC;AAAEf,EAAAA;AAAF,CAAD,KAAeA,KAAK,CAACC,MAAN,CAAae,GAHxB,EAWF,CAAC;AAAEhB,EAAAA;AAAF,CAAD,KAAeA,KAAK,CAACC,MAAN,CAAagB,OAX1B,CAAf;AAcA,MAAMC,KAAK,GAAGpE,MAAM,CAACgD,GAAV;AAAA;AAAA;AAAA,kDAAX","sourcesContent":["import { withFirebase } from '../../firebase'\nimport { useState, useCallback, useEffect } from 'react'\nimport { useDropzone } from 'react-dropzone'\nimport styled from 'styled-components'\n\nimport Card from '../../styles/elements/Card'\nimport Flex from '../../styles/layout/Flex'\nimport Button from '../../styles/elements/Button'\nimport Tooltip from '../../styles/elements/Tooltip'\nimport Text from '../../styles/elements/Text'\nimport { fetchFiles } from '../../store/actions/files'\nimport { useSelector, useDispatch } from 'react-redux'\nimport Spinner from '../../styles/elements/Loading/Spinner'\nimport InfoModal from './InfoModal'\nimport { useToasts } from 'react-toast-notifications'\n\nconst Dropzone = withFirebase(({ firebase }) => {\n  const dispatch = useDispatch()\n  const { addToast } = useToasts()\n  const { files } = useSelector(state => state.generalReducer)\n  const [loading, setLoading] = useState(files.length)\n  const [buttonDisable, disableBtns] = useState(false)\n  const [activeBtn, activateBtn] = useState(null)\n  const [modalIsOpen, toggleModal] = useState(false)\n  const startFetch = useCallback((load = true) => {\n    if (load) setLoading(true)\n    disableBtns(true)\n    fetchFiles({ firebase, dispatch }, () => {\n      setLoading(false)\n      disableBtns(false)\n      activateBtn(null)\n    })\n  }, [])\n  useEffect(() => {\n    setLoading(true)\n    startFetch()\n  }, [startFetch])\n\n  const onError = (msg, dismiss) => {\n    addToast(<div>{msg || 'Error Occurred'}</div>, {\n      appearance: 'error',\n      autoDismiss: dismiss\n    })\n    setLoading(false)\n    disableBtns(false)\n  }\n  const onDrop = useCallback(acceptedFiles => {\n    if (acceptedFiles.length) {\n      firebase.uploadFiles(acceptedFiles, startFetch, onError)\n    } else {\n      onError('File appears to be of wrong format.', true)\n    }\n  }, [])\n\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({\n    onDrop,\n    accept: '.csv'\n  })\n\n  const deleteFile = (filename) => {\n    firebase.deleteFile(filename, (file) => {\n      // success! Now remove that file from local state or refresh files in some way.\n      startFetch(false)\n    })\n  }\n\n  return (\n\n    <Container>\n      <InfoModal modalIsOpen={modalIsOpen} toggleModal={toggleModal} />\n      <Flex justifyContent='flex-end' px='10px'>\n        <Tooltip title=\"What's this?\">\n          <Button\n            bg='transparent'\n            color='greyDarkest'\n            fontSize='20px'\n            onClick={() => toggleModal(!modalIsOpen)}\n          >\n            <i className='fa fa-question-circle' />\n          </Button>\n        </Tooltip>\n      </Flex>\n\n      <DropZone isDragActive={isDragActive} {...getRootProps()}>\n        <input {...getInputProps()} />\n        <H2>\n            Drop files here\n        </H2>\n        <p>or</p>\n        <Button color='blue' bg='white' size='lg'>Select Files</Button>\n        <p>Files must be from Depop to be valid</p>\n      </DropZone>\n      {\n        <Card headerContent='Uploaded Files' isLoading={loading} minHeight='200px' mb='100px'>\n          {\n            files.length\n              ? (\n                <Table>{files.map(({ filename }, i) => (\n                  <Row key={i} index={i}>\n                    <Tooltip\n                      title='Delete file'\n                      arrow={false}\n                      position='right'\n                    >\n                      <DeleteBtn\n                        disabled={buttonDisable}\n                        aria-label={`Click to delete ${filename}`}\n                        onClick={() => {\n                          deleteFile(filename)\n                          activateBtn(i)\n                        }}\n                      >\n                        {\n                          buttonDisable && activeBtn === i ? (\n                            <Spinner width='9px' color='red' size='2' />\n                          ) : (\n                            <i\n                              className='fa fa-close'\n                            />\n                          )\n                        }\n                      </DeleteBtn>\n                    </Tooltip>\n                    {filename}\n                  </Row>\n                )\n                )}\n                </Table>\n              )\n              : <Text fontSize='20px' pt='1em' color='greyDark'>Upload Files Above</Text>\n          }\n\n        </Card>\n      }\n\n    </Container>\n  )\n})\n\nexport default Dropzone\n\nconst Container = styled.div`\n  width:100%;\n`\n\nconst DropZone = styled(Flex)`\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin: 15px;\n  min-height: 250px;\n  margin-top: 10px;\n  transition: .2s;\n  position:relative;\n  border: 5px dashed ${({ theme, isDragActive }) => isDragActive ? theme.colors.greyDark : theme.colors.greyLight};\n  border-radius: ${({ theme, isDragActive }) => isDragActive ? theme.borderRadius.more : theme.borderRadius.normal};\n`\n\nconst H2 = styled.h2`\n    margin: 0;\n    margin-top: 10px;\n    font-weight: ${({ theme }) => theme.fontWeights.regular};\n`\nconst Row = styled.div`\n  display: flex;\n  align-items: center;\n  width: 100%;\n  padding: 3px 0px 3px 5px;\n  border-bottom: ${({ theme, key }) => theme.colors.mainBg} 1px solid;\n  /* background: ${({ theme, index }) => index % 2 === 0 ? theme.colors.mainBg : theme.colors.greyLighter}; */\n`\nconst DeleteBtn = styled.button`\n  margin-right: 5px;\n  cursor: pointer;\n  color: ${({ theme }) => theme.colors.red};\n  height: 25px;\n  width: 25px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction\n  &:hover {\n    color: ${({ theme }) => theme.colors.redDark};\n  }\n`\nconst Table = styled.div`\n  max-height: 250px;\n  overflow: auto;\n  width: 100%;\n`\n"]},"metadata":{},"sourceType":"module"}